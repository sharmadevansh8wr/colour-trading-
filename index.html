<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PREDICTION BY DARK DEVIL BHAI ðŸ˜ˆ</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');
        
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Orbitron', sans-serif; }
        body { background: #000; color: white; min-height: 100vh; display: flex; flex-direction: column; align-items: center; }

        /* Header Bar (Blue) */
        .header { width: 100%; padding: 20px; background: #3f51b5; font-size: 20px; font-weight: bold; text-align: left; box-shadow: 0 4px 10px rgba(0,0,0,0.5); }

        /* Main Glass Card */
        .card { width: 92%; max-width: 400px; padding: 25px; border-radius: 25px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); text-align: center; margin-top: 40px; box-shadow: 0 10px 40px rgba(0,0,0,0.8); }
        
        #page2, #adminSection { display: none; }

        /* Login Inputs */
        .input-group { margin-bottom: 20px; border-bottom: 2px solid #333; }
        .input-group input, .input-group select { width: 100%; padding: 12px; background: transparent; border: none; outline: none; color: white; text-align: center; font-size: 13px; font-family: 'Orbitron'; }

        /* Prediction UI (Screenshot wala look) */
        .system-status { color: #ff0055; font-size: 15px; font-weight: 900; letter-spacing: 2px; }
        .user-meta { color: #888; font-size: 10px; margin: 8px 0 25px 0; letter-spacing: 1px; }
        
        /* Neon Green Box */
        .prediction-box { 
            width: 100%; padding: 40px 10px; border-radius: 20px; 
            border: 2px solid #00ff99; box-shadow: inset 0 0 15px #00ff99, 0 0 20px #00ff99;
            margin-bottom: 30px; display: flex; justify-content: center; align-items: center;
        }
        .pred-text { font-size: 34px; font-weight: 900; color: #00ff99; letter-spacing: 5px; text-transform: uppercase; }

        /* History (Screenshot Look) */
        .history-card { background: rgba(0,0,0,0.7); border-radius: 15px; padding: 15px; text-align: left; border: 1px solid #1a1a1a; }
        .history-header { color: #ff0055; font-size: 11px; margin-bottom: 12px; font-weight: bold; }
        .history-labels { display: grid; grid-template-columns: 1.5fr 1fr 1fr; font-size: 9px; color: #fff; margin-bottom: 10px; text-transform: uppercase; }
        .history-list { max-height: 140px; overflow-y: auto; font-size: 11px; }
        .history-item { display: grid; grid-template-columns: 1.5fr 1fr 1fr; padding: 10px 0; border-top: 1px solid #111; color: #ccc; }

        /* Buttons */
        .btn-main { width: 100%; padding: 15px; background: #fff; color: #000; border: none; font-weight: 900; cursor: pointer; border-radius: 10px; font-size: 12px; }
        .terminate-btn { width: 100%; padding: 15px; background: transparent; border: 1px solid #222; color: #444; margin-top: 25px; border-radius: 12px; font-size: 10px; letter-spacing: 2px; }

        /* Admin Controls */
        .admin-box { background: #080808; padding: 25px; border-radius: 20px; border: 1px solid #ff0055; width: 92%; max-width: 450px; margin-top: 20px; }
        .adm-input { width: 100%; padding: 12px; background: #000; border: 1px solid #333; color: #fff; margin-bottom: 12px; border-radius: 6px; text-align: center; font-family: 'Orbitron'; }
        
        .admin-trigger { position: fixed; bottom: 10px; right: 10px; font-size: 8px; color: #111; cursor: pointer; }
    </style>
</head>
<body>

    <div class="header">DARK DEVIL BHAI ðŸ˜ˆ</div>

    <div class="card" id="page1">
        <h2 style="color:#ff0055; margin-bottom: 25px;">DARK DEVIL BHAI  LOGIN</h2>
        <div class="input-group"><input type="number" id="uidInput" placeholder="8-DIGIT UID"></div>
        <div class="input-group"><input type="password" id="passInput" placeholder="ACCESS KEY (PASSWORD)"></div>
        <div class="input-group">
            <select id="depositAmt">
                <option value="" disabled selected>SELECT DEPOSIT</option>
                <option value="â‚¹100">â‚¹100</option>
                <option value="â‚¹200">â‚¹200</option>
                <option value="â‚¹500">â‚¹500</option>
                <option value="â‚¹1000">â‚¹1000</option>
            </select>
        </div>
        <button class="btn-main" onclick="handleLogin()">INITIALIZE SYSTEM</button>
    </div>

    <div class="card" id="page2">
        <div class="system-status">SYSTEM ACTIVE</div>
        <div class="user-meta" id="uMeta">UID: #123456 | DEPOSIT: â‚¹1000</div>
        
        <div class="prediction-box" id="pBox">
            <div class="pred-text" id="pText">ANALYZING</div>
        </div>

        <div class="history-card">
            <div class="history-header">RESULT HISTORY</div>
            <div class="history-labels">
                <span>PREDICTION NUMBER</span>
                <span>big./ small</span>
                <span>winn / loss</span>
            </div>
            <div id="userHistoryList" class="history-list"></div>
        </div>

        <button class="terminate-btn" onclick="location.reload()">TERMINATE</button>
    </div>

    <div id="adminSection" class="admin-box">
        <h3 style="color:#ff0055; text-align:center; margin-bottom:15px;">MASTER ADMIN</h3>
        
        <input type="number" id="admPeriod" class="adm-input" placeholder="PERIOD NO (e.g. 251)">
        <select id="admChoice" class="adm-input">
            <option value="BIG">BIG</option>
            <option value="SMALL">SMALL</option>
        </select>
        <button class="btn-main" style="background:#ff0055; color:#fff;" onclick="sendPred()">SEND PREDICTION</button>

        <div class="history-card" style="margin-top:20px;">
            <p style="font-size:10px; color:#ff0055; margin-bottom:10px;">MANAGE LIVE RESULTS</p>
            <div id="adminHistoryList" class="history-list"></div>
        </div>
        <button class="terminate-btn" onclick="location.reload()" style="color:#fff;">EXIT ADMIN</button>
    </div>

    <div class="admin-trigger" onclick="adminAccess()">[ ADMIN ]</div>

    <script>
        // Firebase Config (Keep your same config)
        const firebaseConfig = {
            apiKey: "AIzaSyCNaAc3i4UOK57CJaeT96coTlKxfC-7kgk",
  authDomain: "dark-devil-bhai.firebaseapp.com",
  databaseURL: "https://dark-devil-bhai-default-rtdb.firebaseio.com",
  projectId: "dark-devil-bhai",
  storageBucket: "dark-devil-bhai.firebasestorage.app",
  messagingSenderId: "599566539258",
  appId: "1:599566539258:web:470f32fa0489ff3257ec43",
  measurementId: "G-8Y7HFZ2GSE"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // 1. LOGIN
        function handleLogin() {
            const uid = document.getElementById('uidInput').value;
            const pass = document.getElementById('passInput').value;
            const amt = document.getElementById('depositAmt').value;

            if(uid.length === 8 && amt && pass === "DEVIL123") {
                db.ref('users/'+uid).get().then(snap => {
                    if(snap.exists() && snap.val().status === 'approved') {
                        document.getElementById('page1').style.display = 'none';
                        document.getElementById('page2').style.display = 'block';
                        document.getElementById('uMeta').innerText = `UID: #${uid} | DEPOSIT: ${snap.val().amt}`;
                        startSync();
                    } else {
                        db.ref('users/'+uid).set({uid, amt, status:'pending'});
                        alert("Wait for Admin Approval!");
                    }
                });
            } else { alert("Details check karein!"); }
        }

        // 2. ADMIN CONTROL
        function sendPred() {
            const period = document.getElementById('admPeriod').value;
            const choice = document.getElementById('admChoice').value;
            if(!period) return alert("Period enter karo!");

            const key = db.ref('game_history').push().key;
            const data = { id: key, period: period, result: choice, status: 'undefined' };
            
            db.ref('global_pred').set(data);
            db.ref('game_history/' + key).set(data);
            document.getElementById('admPeriod').value = "";
        }

        function updateResult(id, val) {
            db.ref('game_history/'+id).update({ status: val });
            db.ref('global_pred').once('value').then(s => {
                if(s.val().id === id) db.ref('global_pred').update({ status: val });
            });
        }

        // 3. SYSTEM SYNC
        function startSync() {
            db.ref('global_pred').on('value', s => {
                const d = s.val();
                if(d) {
                    document.getElementById('pText').innerText = d.result;
                    const box = document.getElementById('pBox');
                    if(d.status === 'WIN') {
                        box.style.borderColor = "#00ff99"; box.style.boxShadow = "0 0 20px #00ff99";
                        document.getElementById('pText').style.color = "#00ff99";
                    } else if(d.status === 'LOSS') {
                        box.style.borderColor = "#ff0055"; box.style.boxShadow = "0 0 20px #ff0055";
                        document.getElementById('pText').style.color = "#ff0055";
                    }
                }
            });

            db.ref('game_history').on('value', s => {
                const data = s.val();
                const uH = document.getElementById('userHistoryList');
                const aH = document.getElementById('adminHistoryList');
                if(uH) uH.innerHTML = ""; if(aH) aH.innerHTML = "";
                if(data) {
                    Object.values(data).reverse().forEach(h => {
                        uH.innerHTML += `<div class="history-item">
                            <span>${h.period}</span><span>${h.result.toLowerCase()}</span>
                            <span style="color:${h.status==='WIN'?'#00ff99':h.status==='LOSS'?'#ff0055':''}">${h.status.toLowerCase()}</span>
                        </div>`;
                        aH.innerHTML += `<div class="history-item">
                            <span>#${h.period}</span>
                            <button onclick="updateResult('${h.id}','WIN')" style="color:#00ff99;background:none;border:none;cursor:pointer;">WIN</button>
                            <button onclick="updateResult('${h.id}','LOSS')" style="color:#ff0055;background:none;border:none;cursor:pointer;margin-left:10px;">LOSS</button>
                        </div>`;
                    });
                }
            });
        }

        function adminAccess() {
            if(prompt("Admin Access:") === "123") {
                document.getElementById('page1').style.display='none';
                document.getElementById('page2').style.display='none';
                document.getElementById('adminSection').style.display='block';
                startSync();
            }
        }
    </script>
</body>
</html>
